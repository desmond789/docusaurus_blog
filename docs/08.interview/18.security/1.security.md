---
title: 1.安全相关面试题
---
## 配置firealld永久生效规则，限制仅172.17.8.0/24可以访问ssh服务器，并禁止任何人ping服务器，写出详细命令及步骤

添加永久生效的规则

```
# 允许172.17.8.0/24访问SSH
sudo firewall-cmd --permanent --zone=public --add-rich-rule='rule family="ipv4" source address="172.17.8.0/24" service name="ssh" accept'

# 禁止Ping
sudo firewall-cmd --permanent --zone=public --add-rich-rule='rule family="ipv4" protocol value="icmp" drop'
```

* `--permanent` 表示设置永久规则。
* `--zone=public` 表示在 public 区域设置规则，可以根据实际情况修改为其他区域。
* `--add-rich-rule` 表示添加高级规则，用于更灵活的规则定义。

重新加载防火墙规则

```
sudo firewall-cmd --reload
```

查看新规则是否生效

```
sudo firewall-cmd --zone=public --list-all
```

## 被ddos攻击怎么处理

### 使用CDN（内容分发网络）：

CDN服务通过分发流量到全球各个节点，可以有效减轻DDoS攻击带来的负载。这可以通过配置DNS记录将流量导向CDN服务商的服务器来实现。例如，在Cloudflare中，你只需要将域名的DNS解析指向Cloudflare提供的DNS服务器。

### 使用DDoS防护服务：

使用专门的DDoS防护服务，例如Cloudflare、Akamai、AWS Shield等。这些服务通常提供了自动化的DDoS检测和防护机制。具体实施通常包括在服务提供商的控制面板中配置域名、设置防护规则等。

### 配置防火墙规则：

使用网络设备上的防火墙规则来过滤恶意流量。以下是一个简单的iptables规则，用于限制同一IP地址的连接频率：

```
# 限制每秒对同一IP的连接数不超过20个
iptables -A INPUT -p tcp --dport 80 -m connlimit --connlimit-above 20 --connlimit-mask 32 -j DROP
```

### 限制连接频率：

可以使用软件工具，如 `fail2ban`，它能够监测系统日志，当检测到频繁登录失败或恶意行为时，自动加入防火墙规则，限制来自相同IP的连接。

### 使用反向代理：

使用反向代理服务器，如Nginx或Apache，通过配置反向代理规则来过滤和验证请求。以下是一个简单的Nginx配置，用于过滤掉恶意请求：

```
location / {
    proxy_pass http://backend;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    # 添加其他反向代理配置
}
```

### 故障转移和负载均衡

使用负载均衡器，如Nginx、HAProxy等，来分发流量。在受到攻击时，可以将流量转移到备用服务器上。以下是一个简单的Nginx负载均衡配置：

```
upstream backend {
    server server1;
    server server2;
    # 添加其他后端服务器
}

server {
    location / {
        proxy_pass http://backend;
    }
}
```

## 请列举WEB常⻅安全问题（不少于三项），阐述其原理、危害。

### 跨站脚本攻击（Cross-Site Scripting, XSS）：

**原理：**

* 攻击者通过在Web应用中注入恶意脚本，使这些脚本在用户浏览页面时被执行。
* XSS攻击主要分为存储型（将恶意脚本存储在服务器上，用户访问时被注入）、反射型（恶意脚本通过URL传递给服务器，服务器解析后返回给用户）和 DOM-based（攻击基于DOM模型的动态网页）三种形式。

**危害：**

* 窃取用户的敏感信息，如Cookie。
* 劫持用户会话，实施恶意操作。
* 修改网页内容，传播恶意链接。

### SQL注入攻击：

**原理：**

* 攻击者通过在用户输入的数据中注入SQL代码，使得恶意SQL语句被执行。
* 攻击主要发生在未对用户输入进行充分验证的Web应用中。

**危害：**

* 数据泄露：攻击者可以访问、修改、删除数据库中的数据。
* 数据篡改：攻击者可以修改数据库中的数据，导致应用逻辑错误。
* 执行系统命令：攻击者可能通过SQL注入执行系统命令，危害服务器安全。

### 跨站请求伪造（Cross-Site Request Forgery, CSRF）：

**原理：**

* 攻击者通过引诱用户在已登录的Web应用中执行恶意操作，利用用户身份发起请求。
* 攻击者通过伪装的页面向目标网站发送请求，借助用户的身份完成一些非法操作。

**危害：**

* 利用用户身份发起恶意请求，执行一些用户不愿意进行的操作。
* 修改用户账户信息，进行钓鱼攻击，引导用户提交敏感信息。

## 服务器遭到⼊侵，作为安全管理⼈员，你应做如何处理？

1. **隔离受影响的服务器：**
   * 立即断网隔离受到攻击的服务器，防止攻击者进一步扩大攻击范围，也避免其他服务器受到影响。
2. **停止攻击及漏洞利用：**
   * 尽快停止攻击行为，修复或关闭被攻击的漏洞，阻止攻击者再次入侵。
3. **保留日志和证据：**
   * 确保保存有关入侵的所有日志和相关证据，以便进行后续的分析和调查。这对于确定攻击来源、攻击方式以及受影响的数据等非常重要。
4. **通知相关方：**
   * 及时通知组织内的关键人员，包括安全团队、管理层和其他相关部门，以协助处理入侵事件。
5. **修复漏洞：**
   * 修复服务器上发现的漏洞，升级系统和软件到最新版本，并采取必要的安全措施，以防止再次受到类似攻击。
6. **更改所有凭证：**
   * 更改所有可能被攻击者获得的账户密码，包括服务器登录密码、数据库密码等。
7. **进行安全审查：**
   * 对受影响的服务器进行安全审查，检查是否存在其他未被发现的漏洞或后门。
8. **加强安全意识培训：**
   * 提高组织内员工的安全意识，防范社会工程学攻击，减少入侵的可能性。
9. **报告给监管机构：**
   * 根据法规和合规要求，如果有必要，及时报告安全事件给监管机构。
10. **制定入侵响应计划：**
    * 对未来的入侵事件制定应急响应计划，确保在发生类似事件时能够迅速而有效地应对。
