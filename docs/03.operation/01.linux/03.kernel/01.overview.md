---
title: 1.为低延迟操作优化系统
---



## 减少 TCP 性能高峰

生成 TCP 时间戳可能会导致 TCP 性能高峰。`sysctl` 命令控制 TCP 相关条目的值，设置在 `/proc/sys/net/ipv4/tcp_timestamps` 中找到的时间戳内核参数。

### 关闭 TCP 时间戳

关闭 TCP 时间戳可能会降低 TCP 性能高峰。

```
# sysctl -w net.ipv4.tcp_timestamps=0
sysctl -w net.ipv4.tcp_timestamps=0		#0代表禁用TCP 时间戳
```

* 值  `1` 表示生成时间戳
* 值  `0` 表示不生成时间戳

如果发现生成 TCP 时间戳没有导致 TCP 性能高峰，还可以启用它们

```
# sysctl -w net.ipv4.tcp_timestamps=1
sysctl -w net.ipv4.tcp_timestamps=1
```

### 原理

TCP 时间戳是 TCP 协议的一个扩展特性，用于在 TCP 报文中添加时间戳信息，以提高数据传输的精确性和可靠性。禁用 TCP 时间戳功能可能会产生以下影响：

1. **减少报文头部大小** ：TCP 时间戳会在 TCP 报文头部中增加一些额外的字段，禁用时间戳功能可以减少报文的大小。这有助于减少网络流量和提高网络性能，尤其是在网络带宽受限或网络负载较高的情况下。
2. **降低网络延迟** ：由于禁用了时间戳功能，TCP 报文的头部大小减小，可以降低网络传输时的延迟。这对于对网络响应时间敏感的应用程序可能会带来一定的好处。
3. **可能影响性能监控和调试** ：TCP 时间戳功能可以用于性能监控和网络故障排除。禁用这个功能可能会使得一些相关的性能分析工具或网络监控系统失去了部分信息来源，从而影响到对网络性能的监控和调试能力。

## 减少 CPU 性能高峰
