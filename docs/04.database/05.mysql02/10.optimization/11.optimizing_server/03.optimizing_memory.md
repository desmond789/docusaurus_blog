---
title: 3.优化内存使用
---
## MySQL 如何使用内存

MySQL分配缓冲区和缓存来提高数据库操作的性能。 默认配置旨在允许 MySQL 服务器在具有大约 512MB RAM 的虚拟机上启动。 可以通过增加某些缓存和缓冲区相关系统变量的值来提高 MySQL 性能。 还可以修改默认配置以在内存有限的系统上运行 MySQL。

下面的列表描述了 MySQL 使用内存的一些方式。 在适用的情况下，引用相关的系统变量。 有些项目是特定于存储引擎或功能的。

* InnoDB缓冲池是一个内存区域，保存表、索引和其他辅助缓冲区的缓存InnoDB数据。 为了提高大容量读取操作的效率，缓冲池被划分为可以容纳多行的页面。 为了提高缓存管理的效率，缓冲池被实现为页面的链表； 使用 LRU 算法的变体，很少使用的数据会从缓存中老化。

  缓冲池的大小对于系统性能很重要：

  * InnoDB 在服务器启动时使用 malloc() 操作为整个缓冲池分配内存。 innodb_buffer_pool_size 系统变量定义缓冲池大小。 通常，建议的 innodb_buffer_pool_size 值为系统内存的 50% 到 75%。 innodb_buffer_pool_size 可以在服务器运行时动态配置。 有关更多信息，请参见第 17.8.3.1 节 “配置 InnoDB 缓冲池大小”。



缓冲池的大小对于系统性能很重要：

InnoDB 在服务器启动时使用 malloc() 操作为整个缓冲池分配内存。 innodb_buffer_pool_size 系统变量定义缓冲池大小。 通常，建议的 innodb_buffer_pool_size 值为系统内存的 50% 到 75%。 innodb_buffer_pool_size 可以在服务器运行时动态配置。 有关更多信息，请参见第 17.8.3.1 节 “配置 InnoDB 缓冲池大小”。

在具有大量内存的系统上，可以通过将缓冲池划分为多个缓冲池实例来提高并发性。 innodb_buffer_pool_instances 系统变量定义缓冲池实例的数量。

缓冲池太小可能会导致过度搅动，因为页面从缓冲池中刷新后不久又需要再次使用。

太大的缓冲池可能会因内存竞争而导致交换。
